<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <title>Fruitsalad by DKotoski</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Fruitsalad</h1>
        <h2>проект визуелно програмирање</h2>

        <section id="downloads">
          <a href="https://github.com/DKotoski/FruitSalad/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/DKotoski/FruitSalad/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/DKotoski/FruitSalad" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>Fruit Salad</h1>

<h2>Опис</h2>

<p>Нашиот проект за предметот Визуелно Програмирање е аркадна компјутерска игра која ја нарековме Fruit Salad. 
Fruit Salad е аркадна игра во која целта е да се “соберат” сите овошја. Играчот прогресира низ нивоата преку собирање на овошјата во тековното ниво. Секое ниво има повеќе овошја и нивната брзина на движење е поголема.  На крајот има табела со рекорди во која се запишуваат играчите кои собрале најмногу овошја во текот на играта. Целата игра е едноставна и заразна за играње.</p>

<h2>Интерфејс</h2>

<p>Играта има два основни екрани .</p>

<p><img src="http://imageshack.us/a/img41/8171/splashscreenf.jpg" alt="Alt Text"></p>

<p>Почетниот екран го има логото на играта во позадина. Името испишано на горниот дел од екранот. Има копче за нова игра кое се осветлува при покажување на глувчето кон него. Исто така има три врски кон прозорецот со инструкции, табелата со рекорди и информации за играта.</p>

<p></p><img src="http://imageshack.us/a/img826/5555/ingameh.jpg" alt="Alt Text"><p>Главниот екран исто така го има логото на играта во позадина. Во горниот десен агол има покажувач на време кое е преостанато. На кошничката има покажувач на овошја кои се моментално собрани. Под него има покажувач на моментално ниво. Има исто така три копчиња. Првото почнува нова игра, а тековната ја бриши. Второто служи за паузирање и продолжување на играта. Третото враќа кон почетниот екран. Најголемиот дел од овој прозорец го има панелата во која се појавуваат овошјата. Тој е со бела позадина и црна линија во која служи како граница за овошјата. Овој екран се менува кога ќе истече времето.</p>

<p></p><img src="http://imageshack.us/a/img545/9458/gameovertk.jpg" alt="Alt Text"><p>Во панелата каде што се појавуваа овошјата сега има слика на логото со повеќе овошја. Над логото има натпис кој кажува дека времето истекло. На кошничката има покажувач колку овошја се собрани. Ако има нов рекорд се појавува натпис дека има нов рекорд и се појавува копче за тој рекорд да се запиши во табелата на рекорди.</p>

<p></p><img src="http://imageshack.us/a/img209/6523/rekordk.jpg" alt="Alt Text"><p>Тука играчот треба да го напише неговото име и потоа да кликне Запиши. При клик на Откажи се исклучува оваа форма.
Откога ќе притисне Запиши, резултатот се запишува во табелата на рекорди и табелата се појавува на екран.</p>

<p></p><img src="http://imageshack.us/a/img4/1811/tabelazt.jpg" alt="Alt Text"><p>При клик на назат табелата со рекорди се исклучува а при клик на Избриши рекорди, сите досегашни запишани резултати се бришат и табелата ќе биде празна.
 </p>

<h2>Како работи?</h2>

<p>Играта Fruit Salad се базира на исцртување на сликите користејќи ги класите и функциите сместени во класата Windows.Drawing и Windows.Drawing.Graphics.
Секое овошје се инстанцира од класа Ovostie која чува моментална брзина, агол, локација, граници и слика со која ќе биде претставено овошјето. Исто така во класата Ovostie има метод Move() кој кога се повика го придвижува овошјето во зависност од брзината и исто така ако детектира ѕид го одбива овошјето од тој ѕид. Методот Draw(Graphics g) е исто преоптоварен во оваа класа. Тој го ицртува овошјето. Конструкторот на Ovostie е public Ovostie(float x, float y , float velocity , float angle, Image slika). 
Нивоата се случајно генерирани користејќи ја следната функција. </p>

<p>public void GenerirajNivoa()</p>

<pre><code>    {
            List&lt;Image&gt; sliki;//тука се чуваат сликите за да можат да се повикаат 
              //со рандом функција подоцна
            sliki = new List&lt;Image&gt;();
            sliki.Add(Resources.Apple);
            sliki.Add(Resources.matou_strawberry_1979px);
            sliki.Add(Resources.nicubunu_Plum);
            sliki.Add(Resources.pear);

            for (int i = 0; i &lt;= momovostija; i++)
            {
                int gorna=(int)rnd.Next() % (panel1.Bounds.Height-60);
        //Се генерира рандом integer за х координатата на овошјето
                if (gorna&lt;granica.Top)//проверка дали излегува од границите на 
                    gorna+=200;  //панелот
                if (gorna &gt; granica.Bottom)
                    gorna -= 200;
                int leva = (int)rnd.Next() % (panel1.Bounds.Width-60);
        //Се генерира рандом integer за у координатата на овошјето
                if (leva &lt; granica.Left)//проверка дали излегува од границите на
                    leva += 200;       //панелот
                if (leva &gt; granica.Right)
                    leva -= 200;
                Ovostie ovosje = new Ovostie(leva, gorna, brzina,
                 (float)rnd.NextDouble() % 360, sliki[Math.Abs(rnd.Next()) % 4]);
                //Се инстанцира објект од класата Ovostie, при тоа координатите 
                //на појавување, аголот и сликата му се произволни.
               //Брзината на движење е константа.
                ovosje.Bounds = granica;
                Ovosja.Add(ovosje);//се додава овошјето креирано во листа
                                   //со овошја
            }
    //За играта да прогресира до некое ниво па да почне да станува многу 
    //потешка од порано дадени се долните ограничувања и инкременти
    //Времето не може да дојде над 30 секунди
    //брзината стигнува до 25 па времето почнува да се намалува до 15 
    //секунди
    //додека брзината не е 25 бројот на овошја се качува до 20
    //кога брзината достигне 25 а времето падне на 15 секунди бројот на 
            //овошја почнува пак да се качува
            if (lvlvreme &lt; 28)
            {
                if (brzina &lt; 25)
                    brzina *= 1.1f;
                else
                {
                    if (lvlvreme &gt;= 15)
                    {
                        lvlvreme -= 2;
                    }
                    else
                        momovostija++;
                }
                if (momovostija &lt; 20)
                    momovostija++;
                lvlvreme++;
            }

    }
</code></pre>

<p>Исцртувањето на овошјата во панелот се врши преку Timer кој има Timer.Tick() евент. На секои 36 милисекунди се исцртува границата на панелот и се поминува низ листа на овошја за да им се повикаат Draw() и Move() методите.</p>

<p>Исто така има уште еден тајмер кој го намалува времето за една секунда и проверува дали е истечено за да ја запре играта и да го исцрта екранот на слика три.</p>

<p>При клик на панелата се активира настанот  panel1_MouseDown(object sender, MouseEventArgs e) кој проверува дали околу локацијата каде што кликнал глушецот има овошје од листата Ovosja и ако има го брише истото и го зголемува бројачот за резултат за еден. Ако листата се испразне се повикува функцијата GenerirajNivoa() и  бројачот за ниво се зголемува за еден. Овој настан не работи ако играта е паузирана и bool pauza=true.</p>

<p>При истекување на време се активира методот bool CheckHighscore(int rez) од класата Highscore(). Ако резултатот врати true тогаш може да се запише рекордот. Се отвара форма која бара внесување на име на играчот и тоа име подоцна се запишува во табелата на рекорди со функцијата void AddRezultat(Rezultat rez) исто од класата HighScore() и објектот highscore се серијализира во датотека под име highscore.hxs. Метододот  void AddRezultat(Rezultat rez), резултатот што му е даден го запишува на првото место каде што тој е помал од претходниот. Така резултатите ќе се подредени по големина почнувачи од најголемиот секогаш без разлика кога се запишани. Класата HighScore() чува листа на објекти од класата Rezultat().</p>

<p>Потоа се отвара формата HighScoreTable која има табела со лабели кои ги пополнува во конструкторот. Пред да ги пополни лабелите ја вчитува датотеката highscore.hxs во која е серијализиран објектот highscore од класата HighScore(). При пополнување на табелата резултатите со 0 овошја се запишуваат како празна низа од карактери. Ако се притисне да се ресетираат резултатите се повикува методот highscore.Clear() и потоа датотеката се презапишува на претходната за кога се отвори пак табелата таа да биде празна.</p>

<p>При клик на Нова Игра променливите на времето, резултатот, нивото и брзината се враќаат на почетната состојба. Се отвара датотеката highscore.hxs одново за да ги имаме новите рекорди ако ги има и се повикува методот GenerirajLeveli().</p>

<p>Играта е напишана во C# користејќи го Microsoft Visual Studio 2012. Графиките се изработени во Adobe Photoshop CS5.</p>

<h6>Автори:</h6>

<h6>Стојанчо Јанев 115029</h6>

<h6>Дарко Котоски 115037</h6>
      </section>
    </div>

    
  </body>
</html>